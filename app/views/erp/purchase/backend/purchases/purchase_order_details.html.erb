<div class="table-scrollable">
    <table class="table table-bordered table-advance order-column">
        <thead class="flip-content">
            <tr>
                <th class="text-left bg-yellow bg-font-yellow text-nowrap">Mã</th>
                <th class="bg-yellow bg-font-yellow text-nowrap">Đ.kính</th>
                <th class="bg-yellow bg-font-yellow text-nowrap">Loại</th>
                <th class="bg-yellow bg-font-yellow text-nowrap">ĐVT</th>
                <th class="text-right bg-yellow bg-font-yellow text-nowrap">Giá mua<sup>(1)</sup></th>
                <th class="text-right bg-yellow bg-font-yellow text-nowrap">Số lượng<sup>(2)</sup></th>
                <th class="text-right bg-yellow bg-font-yellow text-nowrap" title="(3) = (1) x (2)">Thành tiền<sup>(3)</sup></th>
                <th class="text-right bg-yellow bg-font-yellow text-nowrap">Giảm<sup>(4)</sup></th>
                <th class="text-right bg-yellow bg-font-yellow text-nowrap">Phí v.chuyển<sup>(5)</sup></th>
                <th class="text-right bg-yellow bg-font-yellow text-nowrap" title="Tổng tiền trước thuế: (6) = (3) - (4) + (5)">Tổng cộng<sup>(6)</sup></th>
                <th class="text-right bg-yellow bg-font-yellow text-nowrap">Tiền VAT<sup>(7)</sup></th>
                <th class="text-right bg-yellow bg-font-yellow text-nowrap" title="Tổng cần thanh toán (đã gồm VAT): (8) = (6) + (7)">Tổng thanh toán<sup>(8)</sup></th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="bg-green" colspan="5"><strong> TỔNG CỘNG </strong></td>
                <td class="text-right bg-green"><strong><%= @order.items_count %></strong></td>
                <td class="text-right bg-green"><strong><%= format_price(@order.subtotal) %></strong></td>
                <td class="text-right bg-green"><strong><%= @order.discount_amount == 0 ? '' : format_price(@order.discount_amount) %></strong></td>
                <td class="text-right bg-green"><strong><%= @order.shipping_amount == 0 ? '' : format_price(@order.shipping_amount) %></strong></td>
                <td class="text-right bg-green"><strong><%= format_price(@order.total_without_tax) %></strong></td>
                <td class="text-right bg-green"><strong><%= format_price(@order.cache_tax_amount) %></strong></td>
                <td class="text-right bg-green"><strong><%= format_price(@order.cache_total) %></strong></td>
            </tr>
            <% @order.order_details.each do |order_detail| %>
                <tr>
                    <td class="text-left"><strong><%= order_detail.product_code %></strong></td>
                    <td class="text-left"><%= order_detail.product.get_diameter %></td>
                    <td class="text-left"><%= order_detail.product_category_name %></td>
                    <td class="text-left"><%= order_detail.product_unit_name %></td>
                    <td class="text-right"><%= format_price(order_detail.price) %></td>
                    <td class="text-right"><%= format_number(order_detail.quantity) %></td>
                    <td class="text-right"><%= format_price(order_detail.subtotal) %></td>
                    <td class="text-right"><%= order_detail.discount.nil? ? '' : format_price(order_detail.discount) %></td>
                    <td class="text-right"><%= order_detail.shipping_fee.nil? ? '' : format_price(order_detail.shipping_fee) %></td>
                    <td class="text-right"><%= format_price(order_detail.total_without_tax) %></td>
                    <td class="text-right"><%= format_price(order_detail.tax_amount) %></td>
                    <td class="text-right"><%= format_price(order_detail.total) %></td>
                </tr>
            <% end %>
        </tbody>
    </table>
</div>